(this["webpackJsonpinvest-box-client"]=this["webpackJsonpinvest-box-client"]||[]).push([[0],{67:function(e,t,n){},69:function(e,t,n){},94:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n(0),s=n.n(a),r=n(26),o=n.n(r),l=(n(67),n(68),n(17)),i=n(13),j=(n(69),n(28)),u=n(7),b=n(9),d=n.n(b),h=n(19),O=n(29),m=n(20),x=n.n(m),p=function(e){var t=e.user,n=e.pass;localStorage.setItem("user",t),localStorage.setItem("pass",n)},f=function(){return localStorage.getItem("user")?{username:localStorage.getItem("user"),password:localStorage.getItem("pass")}:null},v={baseURL:"http://invest.terminal.mobi:4000"},g=n(96),y=n(97),N=n(100),w=n(98),k=function(e){var t=Object(a.useState)({user:"",pass:""}),n=Object(i.a)(t,2),s=n[0],r=n[1],o=function(e){r(Object(l.a)(Object(l.a)({},s),{},Object(O.a)({},e.target.name,e.target.value)))},j=function(){var t=Object(h.a)(d.a.mark((function t(n){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,x.a.get("/",{auth:{username:s.user,password:s.pass},baseURL:v.baseURL});case 3:e.onLogin(),p(s),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),alert("login error!"),console.log(t.t0);case 11:r({user:"",pass:""});case 12:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}();return Object(c.jsx)(g.a,{className:"p-4",children:Object(c.jsx)(y.a,{children:Object(c.jsxs)(N.a,{onSubmit:j,children:[Object(c.jsx)("h2",{children:"\u0412\u0445\u043e\u0434 \u0432 \u043a\u0430\u0431\u0438\u043d\u0435\u0442"}),Object(c.jsxs)(N.a.Group,{controlId:"formBasicEmail",children:[Object(c.jsx)(N.a.Label,{children:"\u041b\u043e\u0433\u0438\u043d"}),Object(c.jsx)(N.a.Control,{type:"name",name:"user",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0430\u0448 \u043b\u043e\u0433\u0438\u043d",onChange:o,value:s.user})]}),Object(c.jsxs)(N.a.Group,{controlId:"formBasicPassword",children:[Object(c.jsx)(N.a.Label,{children:"\u041f\u0430\u0440\u043e\u043b\u044c"}),Object(c.jsx)(N.a.Control,{type:"password",name:"pass",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0430\u0448 \u043f\u0430\u0440\u043e\u043b\u044c",onChange:o,value:s.pass})]}),Object(c.jsx)(w.a,{variant:"primary",type:"submit",children:"\u0412\u0445\u043e\u0434"})]})})})},S=n(102),L=n(101),C=function(e){return Object(c.jsxs)(S.a,{bg:"light",expand:"lg",children:[Object(c.jsx)(S.a.Brand,{href:"/",children:"Invest-Box"}),Object(c.jsx)(S.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(c.jsxs)(S.a.Collapse,{id:"basic-navbar-nav",children:[Object(c.jsxs)(L.a,{className:"mr-auto",children:[Object(c.jsx)(j.b,{className:"nav-link",to:"/news",children:"\u041d\u043e\u0432\u043e\u0441\u0442\u0438"}),Object(c.jsx)(j.b,{className:"nav-link",to:"/quotes",children:"\u041a\u043e\u0442\u0438\u0440\u043e\u0432\u043a\u0438"}),Object(c.jsx)(j.b,{className:"nav-link",to:"/portfolio",children:"\u041f\u043e\u0440\u0442\u0444\u0435\u043b\u044c"}),Object(c.jsx)(j.b,{className:"nav-link",to:"/settings",children:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"})]}),Object(c.jsx)(L.a,{className:"ml-auto",children:Object(c.jsx)(w.a,{variant:"outline-secondary",onClick:function(t){t.preventDefault(),localStorage.removeItem("user"),localStorage.removeItem("pass"),e.logout(),window.history.pushState(null,null,"/")},children:"\u0412\u044b\u0445\u043e\u0434"})})]})]})},I=function(){return Object(c.jsx)("div",{className:"container",children:Object(c.jsx)("div",{className:"row justify-content-md-center",children:Object(c.jsx)("div",{className:"col-6",children:Object(c.jsx)("h1",{children:"News"})})})})},R=function(){var e=Object(a.useState)([]),t=Object(i.a)(e,2),n=t[0],s=t[1];return Object(a.useEffect)((function(){(function(){var e=Object(h.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.get("/portfolio/".concat(f().username),{auth:f(),baseURL:v.baseURL});case 2:t=e.sent,s(JSON.parse(t.data.p));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(c.jsx)("div",{className:"container",children:Object(c.jsx)("div",{className:"row justify-content-md-center",children:Object(c.jsxs)("div",{className:"col-6",children:[Object(c.jsx)("h2",{children:"\u041f\u043e\u0440\u0442\u0444\u0435\u043b\u044c"}),Object(c.jsxs)("table",{className:"table",children:[Object(c.jsx)("thead",{children:Object(c.jsxs)("tr",{children:[Object(c.jsx)("th",{scope:"col",children:"Symbol"}),Object(c.jsx)("th",{scope:"col",children:"Name"}),Object(c.jsx)("th",{scope:"col",children:"Value"}),Object(c.jsx)("th",{scope:"col",children:"Price"}),Object(c.jsx)("th",{scope:"col",children:"Total value"})]})}),Object(c.jsx)("tbody",{children:n.map((function(e){return Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:e.symbol}),Object(c.jsx)("td",{children:e.shortName}),Object(c.jsx)("td",{children:e.value}),Object(c.jsx)("td",{children:e.totalValue/e.value}),Object(c.jsx)("td",{children:e.totalValue})]},e._id)}))})]}),Object(c.jsxs)("h3",{children:["\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u044f: ",n.reduce((function(e,t){return e+t.totalValue}),0).toFixed(2)]})]})})})},U=n(57),B=n(58),E=n(61),_=n(60),G=function(e){Object(E.a)(n,e);var t=Object(_.a)(n);function n(){return Object(U.a)(this,n),t.apply(this,arguments)}return Object(B.a)(n,[{key:"render",value:function(){return Object(c.jsx)("div",{className:"container",children:Object(c.jsx)("div",{className:"row justify-content-md-center",children:Object(c.jsx)("div",{className:"col-6",children:Object(c.jsx)("h1",{children:"Quotes"})})})})}}]),n}(s.a.Component),P=n(55),V=function(e){var t=e.handleSubmit,n=e.value,a=e.handleInput;return Object(c.jsx)(N.a,{onSubmit:t,children:Object(c.jsxs)(N.a.Row,{children:[Object(c.jsx)(P.a,{children:Object(c.jsx)(N.a.Group,{controlId:"formValue",children:Object(c.jsx)(N.a.Control,{type:"text",value:n,onChange:a})})}),Object(c.jsx)(P.a,{children:Object(c.jsx)(w.a,{variant:"outline-secondary",type:"submit",children:"OK"})})]})})},F=function(e){var t=Object(a.useState)(!1),n=Object(i.a)(t,2),s=n[0],r=n[1],o=e.setPortfolio,j=e.instrument,u=function(){var e=Object(h.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(!1),e.prev=1,e.next=4,x.a.post("/portfolio/update",{username:f().username,symbol:j.symbol,value:j.value},{auth:f(),baseURL:v.baseURL});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=Object(h.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.post("/portfolio/remove",{username:f().username,symbol:j.symbol},{auth:f(),baseURL:v.baseURL});case 3:o((function(e){return e.filter((function(e){return e._id!==j._id}))})),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();return Object(c.jsx)("li",{className:"list-group-item",children:Object(c.jsxs)("div",{className:"row",children:[Object(c.jsx)("div",{className:"col-7",children:Object(c.jsx)("b",{children:j.shortName})}),s?Object(c.jsx)("div",{className:"col-3",children:Object(c.jsx)(V,{handleSubmit:u,value:j.value,handleInput:function(e){o((function(t){return t.map((function(t){return t._id===j._id?Object(l.a)(Object(l.a)({},t),{},{value:e.target.value}):t}))}))}})}):Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("div",{className:"col-1",children:Object(c.jsx)("b",{children:e.instrument.value})}),Object(c.jsx)("div",{className:"col-2",children:Object(c.jsx)("button",{type:"button",className:"btn btn-sm btn-light",onClick:function(){r(!0)},children:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c"})})]}),Object(c.jsx)("div",{className:"col-2",children:Object(c.jsx)("button",{type:"button",className:"btn btn-sm btn-light",onClick:b,children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})})]})})},J=n(99),T=function(){var e=Object(a.useState)([]),t=Object(i.a)(e,2),n=t[0],s=t[1],r=Object(a.useState)(!1),o=Object(i.a)(r,2),j=o[0],u=o[1],b=Object(a.useState)({symbol:"",value:""}),m=Object(i.a)(b,2),p=m[0],g=m[1],y=function(){u(!1)},k=function(){var e=Object(h.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.post("/portfolio/add",{username:f().username,symbol:p.symbol,value:p.value},{auth:f(),baseURL:v.baseURL});case 2:u(!1);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(e){g(Object(l.a)(Object(l.a)({},p),{},Object(O.a)({},e.target.name,e.target.value)))};return Object(a.useEffect)((function(){(function(){var e=Object(h.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.get("/portfolio/".concat(f().username),{auth:f(),baseURL:v.baseURL});case 2:t=e.sent,s(JSON.parse(t.data.p));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)("div",{className:"container",children:[Object(c.jsx)("div",{className:"row justify-content-md-center",children:Object(c.jsx)("h1",{className:"",children:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u044f"})}),Object(c.jsx)("div",{className:"row justify-content-md-center",children:Object(c.jsx)("ul",{className:"list-group col-8",children:n.map((function(e){return Object(c.jsx)(F,{instrument:e,setPortfolio:s},e._id)}))})}),Object(c.jsx)("div",{className:"row justify-content-md-center mt-4",children:Object(c.jsx)("div",{className:"col-2 ",children:Object(c.jsx)("button",{type:"button",className:"btn btn-outline-secondary",onClick:function(){u(!0)},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"})})})]}),Object(c.jsxs)(J.a,{show:j,onHide:y,children:[Object(c.jsx)(J.a.Header,{closeButton:!0,children:Object(c.jsx)(J.a.Title,{children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0438\u043d\u0441\u0442\u0440\u0443\u043c\u0435\u043d\u0442 \u0432 \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u044c"})}),Object(c.jsx)(J.a.Body,{children:Object(c.jsxs)(N.a,{children:[Object(c.jsxs)(N.a.Group,{controlId:"formBasicEmail",children:[Object(c.jsx)(N.a.Label,{children:"\u0422\u0438\u043a\u0435\u0440"}),Object(c.jsx)(N.a.Control,{type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",name:"symbol",value:p.symbol,onChange:S})]}),Object(c.jsxs)(N.a.Group,{controlId:"formBasicPassword",children:[Object(c.jsx)(N.a.Label,{children:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e"}),Object(c.jsx)(N.a.Control,{type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e",name:"value",value:p.value,onChange:S})]})]})}),Object(c.jsxs)(J.a.Footer,{children:[Object(c.jsx)(w.a,{variant:"outline-secondary",onClick:y,children:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"}),Object(c.jsx)(w.a,{variant:"secondary",onClick:k,children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"})]})]})]})},q=function(){return Object(c.jsx)("div",{className:"container",children:Object(c.jsx)("div",{className:"row justify-content-md-center",children:Object(c.jsx)("div",{className:"col-6",children:Object(c.jsx)("h1",{children:"Main"})})})})},H=function(){var e=Object(a.useState)("logout"),t=Object(i.a)(e,2),n=t[0],s=t[1];return Object(a.useEffect)((function(){s(f()?"login":"logout")}),[]),"login"===n?Object(c.jsxs)(j.a,{children:[Object(c.jsx)(C,{logout:function(){s("logout")}}),Object(c.jsx)(u.a,{path:"/",exact:!0,component:q}),Object(c.jsx)(u.a,{path:"/news/",component:I}),Object(c.jsx)(u.a,{path:"/portfolio/",component:R}),Object(c.jsx)(u.a,{path:"/quotes/",component:G}),Object(c.jsx)(u.a,{path:"/settings/",render:function(e){return Object(c.jsx)(T,Object(l.a)({},e))}})]}):Object(c.jsx)(k,{onLogin:function(){s("login")}})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(Object(c.jsx)(H,{}),document.getElementById("root"))}},[[94,1,2]]]);
//# sourceMappingURL=main.7c7a3fab.chunk.js.map